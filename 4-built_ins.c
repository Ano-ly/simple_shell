#include "main.h"

/**
 * is_exit_is_env - checks if command is exit or env built-in
 * @arr: array of arguments generated by function split_string
 * @envp: environment passed down by main function
 * @argvo: argv[0] of main function;
 * @ii: int count of main while loop repetitions.
 * Description - comes immediately after split_string function.
 * called by the main function
 * Return: -1 if either built-ins not successful, positive number
 * if program to exit, -2 if env command executed successfully,
 * -3 if command is not a built-in.
*/

int is_exit_is_env(char **arr, char **envp, char *argvo, int ii)
{
	int exit_value;

	if (_strcmp(arr[0], "exit") == 0)
	{
		exit_value = exit_shell(arr);
		if (exit_value == -1)
			perror("False status");
		return (exit_value);
	}
	else if (_strcmp(arr[0], "env") == 0)
	{
		if (arr[1] == NULL)
		{
			built_env(envp);
			return (-2);
		}
		else
		{
			perror("Usage: env");
			return (-1);
		}
	}
	else
	{
		not_builtin_for_path(arr, envp, argvo, ii);
	}
	return (-3);
}

/**
 * built_env - an implemented version of the env command.
 * @env_t: environment, pointer to an array of strings
 * Description - a built-in implementation of env
 * Return: void
*/

void built_env(char **env_t)
{
	int i;
	int j;
	char *var;

	i = 0;

	while (env_t[i] != NULL)
	{
		j = 0;
		var = env_t[i];
		while (var[j] != '\0')
		{
			_putchar(var[j]);
			j++;
		}
		_putchar('\n');
		i++;
	}
}

/**
 * exit_shell - exits the shell
 * @arr: array of arguments
 * Definition - exits shell and includes code for exit status.
 * Return: positive number if program to be exited, -1, if not.
 * returns the exit status number.
*/

int exit_shell(char **arr)
{
	int i;
	int count;
	char *status;
	int stat;

	i = 0;
	count = 0;

	while (arr[i] != NULL)
	{
		count++;
		i++;
	}
	if (count >= 2)
	{
		i = 0;
		status = arr[1];
		while (status[i] != '\0')
		{
			if (!(status[i] >= 48 && status[i] <= 57))
			{
				perror("Invalid argument");
				return(-1);
			}
			i++;
		}
		stat = _atoi(status);
		return (stat);
	}
	else if (count == 1)
	{
		return(0);
	}
	return (1);
}
